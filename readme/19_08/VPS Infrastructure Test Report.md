# VPS Infrastructure Test Report
## –î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: 18 –∞–≤–≥—É—Å—Ç–∞ 2025

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### ‚úÖ –£–°–ü–ï–®–ù–´–ï –¢–ï–°–¢–´

**1. Drone Control API Health Check**
- Endpoint: `GET /api/v1/health`
- –°—Ç–∞—Ç—É—Å: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- –û—Ç–≤–µ—Ç: HTTP 200
- –°–µ—Ä–≤–∏—Å: drone-control-api v1.0.0

**2. Drone Status Endpoint**
- Endpoint: `GET /api/v1/drone/status`
- –°—Ç–∞—Ç—É—Å: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- –û—Ç–≤–µ—Ç: HTTP 200
- Mock —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è: –±–∞—Ç–∞—Ä–µ—è 20%, GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –≤—ã—Å–æ—Ç–∞, —Å–∫–æ—Ä–æ—Å—Ç—å

**3. Video Stream Endpoint**
- Endpoint: `GET /api/v1/video/stream`
- –°—Ç–∞—Ç—É—Å: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- –û—Ç–≤–µ—Ç: HTTP 200
- RTSP URL: rtsp://87.120.254.156:8554/relay
- HTTP URL: http://87.120.254.156:8554/relay

**4. System Services Status**
- Nginx: ‚úÖ –ê–ö–¢–ò–í–ï–ù
- WireGuard VPN: ‚úÖ –ê–ö–¢–ò–í–ï–ù
- Drone Control API: üîß –ó–ê–ü–£–©–ï–ù –í–†–£–ß–ù–£–Æ (systemd –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω)

#### ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

**1. WebSocket Broadcast Error**
- –ü—Ä–æ–±–ª–µ–º–∞: `Server.emit() got an unexpected keyword argument 'broadcast'`
- –í–ª–∏—è–Ω–∏–µ: –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP 500
- –ü—Ä–∏—á–∏–Ω–∞: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–∏ Flask-SocketIO
- –°—Ç–∞—Ç—É—Å: –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**2. Systemd Service**
- –ü—Ä–æ–±–ª–µ–º–∞: drone-control-api systemd —Å–µ—Ä–≤–∏—Å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
- –í–ª–∏—è–Ω–∏–µ: API –∑–∞–ø—É—â–µ–Ω –≤—Ä—É—á–Ω—É—é, –Ω–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- –°—Ç–∞—Ç—É—Å: –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

**1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å WebSocket broadcast**
```python
# –ó–∞–º–µ–Ω–∏—Ç—å:
socketio.emit('telemetry_update', drone_state, broadcast=True)
# –ù–∞:
socketio.emit('telemetry_update', drone_state)
```

**2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å systemd —Å–µ—Ä–≤–∏—Å**
```bash
systemctl start drone-control-api
systemctl status drone-control-api
```

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: 85%**

‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- VPS —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- API endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Nginx reverse proxy —Ä–∞–±–æ—Ç–∞–µ—Ç
- WireGuard VPN –∞–∫—Ç–∏–≤–µ–Ω
- Mock —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:**
- WebSocket broadcast —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- Systemd –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–∏—Å–∞

üöÄ **–ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É:**
- –§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Jetson Nano
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tiger CRM
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥—Ä–æ–Ω–æ–º

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)

```
‚úÖ Tiger CRM (–≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
    ‚Üì HTTPS/WSS API calls
‚úÖ VPS Server (87.120.254.156:3001) - –†–ê–ë–û–¢–ê–ï–¢
    ‚Üì WireGuard VPN (10.50.0.1 ‚Üî 10.50.0.10)
üîß Jetson Nano (–≥–æ—Ç–æ–≤ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
    ‚Üì MAVLink/Serial
üîß Drone Autopilot (–æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
```

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å WebSocket broadcast** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å systemd –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫** - –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
3. **–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ Jetson Nano** - —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Tiger CRM** - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥—Ä–æ–Ω–æ–º** - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

VPS –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≥–æ—Ç–æ–≤–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞. –û—Å–Ω–æ–≤–Ω—ã–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ WebSocket —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Tiger CRM.
